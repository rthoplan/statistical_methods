<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Quiz: The Data Detective</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@400;700&family=Special+Elite&display=swap');
        body {
            font-family: 'Roboto Slab', serif;
            background-color: #f5f5f5;
            background-image:
                linear-gradient(rgba(212, 199, 170, 0.5) .1em, transparent .1em),
                linear-gradient(90deg, rgba(212, 199, 170, 0.5) .1em, transparent .1em);
            background-size: 3em 3em;
        }
        .case-file {
            background-color: #fefcf5;
            border: 1px solid #e2d9c2;
            box-shadow: 5px 5px 15px rgba(0,0,0,0.1);
            position: relative;
        }
        .case-file-header {
            font-family: 'Special Elite', cursive;
            border-bottom: 2px solid #e2d9c2;
        }
        .option-tag {
            transition: all 0.2s ease-in-out;
            background-color: #e9e5d9;
            border-bottom: 3px solid #d1c8b3;
        }
        .option-tag:hover {
            transform: translateY(-2px);
            background-color: #d1c8b3;
            border-bottom-width: 5px;
        }
        .stamp {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-15deg);
            font-size: 4rem;
            font-weight: 700;
            font-family: 'Roboto Slab', serif;
            border: 7px double;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
            pointer-events: none; /* So it doesn't block clicks */
        }
        .stamp.correct {
            color: #166534;
            border-color: #166534;
            opacity: 0.15;
        }
        .stamp.incorrect {
            color: #991b1b;
            border-color: #991b1b;
            opacity: 0.15;
        }
        .feedback-note {
            background-color: #fffbeb;
            border-left: 4px solid #facc15;
        }
        .feedback-panel {
            transition: all 0.5s ease-in-out;
            max-height: 0;
            opacity: 0;
            overflow: hidden;
        }
        .feedback-panel.show {
            max-height: 500px;
            opacity: 1;
        }
    </style>
</head>
<body class="p-4 sm:p-8 flex items-center justify-center min-h-screen">

    <div class="max-w-xl w-full mx-auto">
        <div id="quiz-container">
            <div class="case-file p-6 rounded-lg">
                <header class="case-file-header pb-4 mb-6">
                    <h1 class="text-3xl text-gray-700">DATA DETECTIVE</h1>
                    <p class="text-gray-500">Case #<span id="question-number">1</span></p>
                </header>
                
                <main>
                    <p class="text-lg text-gray-800 mb-2 font-bold">Evidence:</p>
                    <p id="question-text" class="text-lg text-gray-700 mb-6 min-h-[50px] bg-gray-100 p-4 rounded-md"></p>
                    
                    <p class="text-lg text-gray-800 mb-4 font-bold">Classify The Data:</p>
                    <div id="options-container" class="grid grid-cols-2 gap-4">
                        <!-- Options will be injected here -->
                    </div>
                </main>
                
                <div class="stamp" id="stamp"></div>

                <footer id="feedback-panel" class="feedback-panel mt-6">
                    <div class="feedback-note p-4 rounded-lg">
                        <h3 class="text-lg font-bold text-gray-800">Detective's Note:</h3>
                        <p id="feedback-explanation" class="mt-2 text-gray-700"></p>
                    </div>
                    <button id="next-button" class="w-full mt-4 bg-gray-700 hover:bg-gray-800 text-white font-bold py-3 rounded-lg">Next Case</button>
                </footer>
            </div>
        </div>
        
        <div id="results-container" class="hidden text-center case-file p-8 rounded-lg">
             <h1 class="text-3xl font-bold text-gray-800 case-file-header pb-4">Case Closed!</h1>
             <p class="text-lg text-gray-600 mt-4">Your Detective Rank:</p>
             <p id="detective-rank" class="text-4xl font-bold text-blue-800 my-4"></p>
             <p class="text-2xl font-semibold"><span id="final-score">0</span> out of 5 correct</p>
             <button onclick="restartQuiz()" class="mt-8 bg-gray-700 hover:bg-gray-800 text-white font-bold py-3 px-8 rounded-lg">Open a New Case File</button>
        </div>
    </div>

    <script>
        const quizData = [
            { question: "Does a policy have a critical illness rider attached? (Yes/No)", options: ["Binary", "Ordinal", "Discrete", "Continuous"], answer: "Binary", explanation: "This is Binary data because there are only two possible states: the rider is either present or it is not." },
            { question: "An underwriter notes the primary use of an insured vehicle.", options: ["Ordinal", "Nominal", "Discrete", "Continuous"], answer: "Nominal", explanation: "This is Nominal data. The categories ('Commuting', 'Business', 'Pleasure') have no intrinsic order." },
            { question: "A property is assessed for flood risk and categorised as 'Minimal', 'Moderate', 'Severe', or 'Extreme'.", options: ["Nominal", "Binary", "Ordinal", "Discrete"], answer: "Ordinal", explanation: "This is Ordinal data because the categories have a clear, meaningful ranking from lowest to highest risk." },
            { question: "An actuary counts the number of beneficiaries listed on a life insurance policy.", options: ["Continuous", "Ordinal", "Discrete", "Nominal"], answer: "Discrete", explanation: "This is Discrete data. The value is a countable, whole number (1, 2, 3, etc.). You can't list 2.5 beneficiaries." },
            { question: "A medical report records the precise cholesterol level of an applicant (e.g., 5.1 mmol/L).", options: ["Discrete", "Continuous", "Binary", "Ordinal"], answer: "Continuous", explanation: "This is Continuous data. The value can be any number within a range and is measured with precision, not counted." }
        ];

        let currentQuestionIndex = 0;
        let score = 0;
        
        const synth = new Tone.Synth().toDestination();
        const metalSynth = new Tone.MetalSynth({
            frequency: 50,
            envelope: { attack: 0.001, decay: 0.1, release: 0.01 },
            harmonicity: 3.1,
            modulationIndex: 16,
            resonance: 4000,
            octaves: 1.5
        }).toDestination();


        const questionNumberEl = document.getElementById('question-number');
        const questionTextEl = document.getElementById('question-text');
        const optionsContainerEl = document.getElementById('options-container');
        const feedbackPanelEl = document.getElementById('feedback-panel');
        const feedbackExplanationEl = document.getElementById('feedback-explanation');
        const nextButtonEl = document.getElementById('next-button');
        const quizContainerEl = document.getElementById('quiz-container');
        const resultsContainerEl = document.getElementById('results-container');
        const finalScoreEl = document.getElementById('final-score');
        const detectiveRankEl = document.getElementById('detective-rank');
        const stampEl = document.getElementById('stamp');

        function loadQuestion() {
            if (currentQuestionIndex >= quizData.length) {
                showResults();
                return;
            }
            
            feedbackPanelEl.classList.remove('show');
            stampEl.classList.remove('correct', 'incorrect');
            const currentQuestion = quizData[currentQuestionIndex];
            
            questionNumberEl.textContent = (currentQuestionIndex + 1).toString().padStart(3, '0');
            questionTextEl.textContent = currentQuestion.question;
            optionsContainerEl.innerHTML = '';

            currentQuestion.options.forEach(option => {
                const button = document.createElement('button');
                button.textContent = option;
                button.className = 'option-tag w-full p-4 rounded-lg font-semibold text-gray-700';
                button.onclick = () => selectAnswer(button, option, currentQuestion.answer);
                optionsContainerEl.appendChild(button);
});
        }
        
        function selectAnswer(button, selectedOption, correctAnswer) {
            optionsContainerEl.querySelectorAll('button').forEach(btn => btn.disabled = true);

            if (selectedOption === correctAnswer) {
                score++;
                stampEl.textContent = "CORRECT";
                stampEl.classList.add('correct');
                synth.triggerAttackRelease("C5", "8n");
            } else {
                stampEl.textContent = "INCORRECT";
                stampEl.classList.add('incorrect');
                metalSynth.triggerAttackRelease("C2", "8n", Tone.now(), 0.8);
            }
            
            feedbackExplanationEl.textContent = quizData[currentQuestionIndex].explanation;
            feedbackPanelEl.classList.add('show');
        }

        function showResults() {
            quizContainerEl.style.display = 'none';
            resultsContainerEl.style.display = 'block';
            finalScoreEl.textContent = score;
            
            let rank = "Rookie";
            if (score >= 5) rank = "Chief Actuary";
            else if (score >= 4) rank = "Lead Detective";
            else if (score >= 2) rank = "Investigator";
            detectiveRankEl.textContent = rank;
        }
        
        function restartQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            resultsContainerEl.style.display = 'none';
            quizContainerEl.style.display = 'block';
            loadQuestion();
        }

        nextButtonEl.addEventListener('click', () => {
            currentQuestionIndex++;
            loadQuestion();
        });
        
        loadQuestion();
    </script>
</body>
</html>
